module.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ERROR_PREFIX="[FLIP ERROR]:",e.INFO_PREFIX="[FLIP INFO]:",e.WARNNING_PREFIX="[FLIP WARNNING]:"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={exists:function(t){return null!==t&&void 0!==t},getComputedStyle:function(t){return window.getComputedStyle(t)},getLayout:function(t){return this.isDOMElement(t)||this.isDOMNode(t)?t.getBoundingClientRect():null},getMargin:function(t,e){if(!this.isDOMElement(t)&&!this.isDOMNode(t))return null;var n=this.exists(e)?e:this.getComputedStyle(t);return{left:parseFloat(n.marginLeft),top:parseFloat(n.marginTop)}},getOpacity:function(t,e){if(!this.isDOMElement(t)&&!this.isDOMNode(t))return null;var n=this.exists(e)?e:this.getComputedStyle(t);return parseFloat(n.opacity)},getRealTimeStyles:function(t){if(!this.isDOMElement(t)&&!this.isDOMNode(t))return null;var e=this.getComputedStyle(t);return{layout:this.getLayout(t),opacity:this.getOpacity(t,e),styleRect:this.getStyleRect(t,e),transform:this.getTransform(t,e)}},getStyleRect:function(t,e){if(!this.isDOMElement(t)&&!this.isDOMNode(t))return null;var n=this.exists(e)?e:this.getComputedStyle(t),i=n.top.replace(/px/,"")-0;return{left:n.left.replace(/px/,"")-0,top:i}},getTransform:function(t,e){return this.isDOMElement(t)||this.isDOMNode(t)?(this.exists(e)?e:this.getComputedStyle(t)).transform:null},isDOMElement:function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":i(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":i(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},isDOMNode:function(t){return"object"===("undefined"==typeof Node?"undefined":i(Node))?t instanceof Node:t&&"object"===(void 0===t?"undefined":i(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},isNumber:function(t){return"number"==typeof t},isObject:function(t){return this.exists(t)&&"object"===(void 0===t?"undefined":i(t))&&!Array.isArray(t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(t){return t&&t.__esModule?t:{default:t}}(i);n(0);e.default={Cubic:function(t,e,n,i){return r.default.exists(t)&&r.default.exists(e)&&r.default.exists(n)&&r.default.exists(i)?"cubic-bezier("+t+","+e+","+n+","+i+")":"cubic-bezier(.17,.67,.83,.67)"},Ease:"ease",EaseIn:"ease-in",EaseOut:"ease-out",EaseInOut:"ease-in-out",Linear:"linear",MDCubic:"cubic-bezier(0.4,0,0.2,1)"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={convertMatrixToTransform:function(t){var e=[];return t.forEach(function(t,n){var i=n[0],r=n[1];i>=2||e.splice((i+1)*r+i,0,t)}),"matrix("+e.join(", ")+")"},convertTransformToMatrix:function(t){if("none"===t||""===t)return r.default.eye(3);var e=t.replace(/(matrix\()([\d.\s,-]+)(\))/,"$2");e=e.replace(/\s+/g,"");var n=e.split(",").map(function(t){return t-0});return r.default.matrix([[n[0],n[2],n[4]],[n[1],n[3],n[5]],[0,0,1]])},excludeTSTransform:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.convertTransformToMatrix(t),a=this.getTranslateMatrix(e),o=this.getScaleMatrix(n),s=r.default.multiply(a,o),u=r.default.multiply(i,r.default.inv(s));return this.convertMatrixToTransform(u)},getRotateMatrix:function(t){var e=t/180*Math.PI;return r.default.matrix([[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]])},getTransformInfo:function(t){var e=this.convertTransformToMatrix(t),n={};e.forEach(function(t,e){var i=e[0],r=e[1];0===i&&0===r&&(n.a=t),1===i&&0===r&&(n.b=t),0===i&&1===r&&(n.c=t),1===i&&1===r&&(n.d=t),0===i&&2===r&&(n.e=t),1===i&&2===r&&(n.f=t)});var i=Math.atan(n.b/n.a);return n.b>0&&n.a<0&&(i=Math.PI+i),n.b<0&&n.a<0&&(i=Math.PI+i),n.b<0&&n.a>0&&(i=2*Math.PI+i),{rotate:i/Math.PI*180,scale:n.a/Math.cos(i),translate:{x:n.e,y:n.f}}},getTranslateMatrix:function(t){return r.default.matrix([[1,0,t[0]],[0,1,t[1]],[0,0,1]])},getScaleMatrix:function(t){return r.default.matrix([[t,0,0],[0,t,0],[0,0,1]])},rsMatrix:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getRotateMatrix(t)},rotateTransform:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getRotateMatrix(t);return this.convertMatrixToTransform(e)},transformMatrix:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.getTranslateMatrix(e),o=this.getScaleMatrix(n),s=this.getRotateMatrix(i),u=r.default.multiply(r.default.multiply(a,o),s),l=r.default.multiply(t,u);return this.convertMatrixToTransform(l)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={transitionend:function(){var t=window.document.createElement("div"),e={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},n=Object.keys(e).find(function(e){return void 0!==t.style[e]});if(!n)throw new Error("Your browser do not support transitionend event. Please try it on other morden browsers.");return e[n]}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),s=i(o),u=n(3),l=i(u),f=n(4),c=i(f),d=n(1),p=i(d),y=n(0),h=function(){function t(){r(this,t),this.flipUnits={},this.default={duration:1e3,options:{use3d:!0}}}return a(t,null,[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t,t.instance.Easing=s.default),t.instance}}]),a(t,[{key:"first",value:function(t,e){var n=t,i=this.getFlipUnit(n.dataset.flipId);i=null===i?this.initFlipUnit(n):this.updateFlipUnit(n);var r=this.default.options;return i.options=Object.assign({},r,e),n.style.transition="",i}},{key:"getFlipUnit",value:function(t){return this.flipUnits[t]||null}},{key:"initFlipUnit",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t,i="flip-"+(new Date).getTime();n.dataset.flipId=i,""===n.style.position&&(n.style.position="relative");var r=p.default.getRealTimeStyles(n),a=r.layout,o=r.opacity,s=r.styleRect;return this.flipUnits[i]={id:i,el:n,stats:{layout:a,opacity:o,styleRect:s},current:{layout:a,opacity:o,rotate:0,styleRect:s},preparing:e},this.flipUnits[i]}},{key:"invert",value:function(t){var e=t,n=this.getFlipUnit(e.dataset.flipId),i=n.current,r=n.last,a=n.options,o=i.layout,s=o.top,u=o.left,l=o.width,f=o.height,c=i.rotate,d=r.layout,p=d.top,y=d.left,h=d.width,m=d.height,v={x:u-y,y:s-p,sx:l/h,sy:f/m};e.style.transformOrigin="0 0";var g=a.use3d?"translate3d("+v.x+"px, "+v.y+"px, 0)":"translate("+v.x+"px, "+v.y+"px)",x="scale("+v.sx+", "+v.sy+")",M="rotate("+c+"deg)",b=[g,x,M].join(" ");return e.style.transform=b,n.el=e,n}},{key:"last",value:function(t,e){var n=t,i=this.getFlipUnit(n.dataset.flipId),r=i.stats,a=r.layout,o=r.styleRect,s=e.x,u=e.y,l=e.scale;p.default.exists(s)&&(n.style.left=o.left+s+"px"),p.default.exists(u)&&(n.style.top=o.top+u+"px"),p.default.exists(l)&&(n.style.width=a.width*l+"px",n.style.height=a.height*l+"px");var f=p.default.getLayout(n);return i.last={layout:f},i.el=n,i}},{key:"linkUnitPromise",value:function(t,e,n){var i=this.flipUnits[t];if("function"==typeof(i.promise||{}).reject){var r=i.options;"function"==typeof r.interrupt&&r.interrupt(i.el)}return i.promise={resolve:e,reject:n},i}},{key:"magic",value:function(t,e,n,i,r){var a=this,o="magic-wand-"+Date.now();return new Promise(function(s,u){var l=t;if(!p.default.isDOMElement(l)&&!p.default.isDOMNode(l))return void u(y.ERROR_PREFIX+" "+l+" is not a dom element.");if(!p.default.isObject(e))return void u(y.ERROR_PREFIX+" "+e+" is not valid. Please check whether your usage of param 'last' is correct.");if(p.default.exists(n)&&!p.default.isNumber(n))return void u(y.ERROR_PREFIX+" "+n+" is not valid. Param 'duration' should be number or float.");if(p.default.exists(r)&&!p.default.isObject(r))return void u(y.ERROR_PREFIX+" "+r+" is not valid. Please check whether your usage of param 'options' is correct.");var f=a.getFlipUnit(l.dataset.flipId);if(null!==f&&f.preparing)return void u(y.ERROR_PREFIX+" Magic will not display while time gap is too small.");f=a.first(l,r),f=a.linkUnitPromise(f.id,s,u);var d=a.default.duration;requestAnimationFrame(function(){function t(){f.magicWand===o&&(l.style.transition="",f.promise=null,s(this))}f=a.last(l,e),f=a.invert(l),requestAnimationFrame(function(){f.preparing=!1,f.magicWand=o,a.play(l,e,n||d,i)}),l.addEventListener(c.default.transitionend(),t,{capture:!1,once:!0})})})}},{key:"play",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.default.EaseInOut,r=t,a=this.getFlipUnit(r.dataset.flipId),o=e.opacity,u=e.rotate;r.style.transition="all "+n+"ms "+i;var l="";return p.default.exists(o)&&(r.style.opacity=o),p.default.exists(u)&&(l+="rotate("+u+"deg)"),r.style.transform=l,a.el=r,a}},{key:"reload",value:function(t){var e=t;if(null===this.getFlipUnit(e.dataset.flipId))throw new Error(y.ERROR_PREFIX+" element "+e+" has never show its magic yet.");return this.initFlipUnit(e,!1),this}},{key:"updateFlipUnit",value:function(t){var e=t,n=this.getFlipUnit(e.dataset.flipId),i=p.default.getTransform(e);e.style.transition="";var r=l.default.getTransformInfo(i),a=l.default.transformMatrix(1,[r.translate.x,r.translate.y],r.scale);e.style.transform=a;var o=p.default.getRealTimeStyles(e),s=o.layout,u=o.opacity;return e.style.transform="",e.style.opacity=u,n.current.layout=s,n.current.opacity=u,n.current.rotate=r.rotate,n.preparing=!0,n}}]),t}();h.instance=null,t.exports=h.getInstance()},function(t,e){t.exports=require("mathjs")}]);